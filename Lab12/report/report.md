---
## Front matter
title: "Отчёт по лабораторной работе №12"
subtitle: "Настройки сети в Linux"
author: "Сулейм Гамбердов"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки настройки сетевых параметров системы.

# Ход выполнения

## Проверка конфигурации сети

1. Получены права суперпользователя с помощью команды **su -**. После ввода пароля в приглашении командной строки появился символ **#**, подтверждающий, что активен пользователь **root**.

2. Для просмотра информации о сетевых интерфейсах и статистике пакетов выполнена команда **ip -s link**.  
   Из вывода видно два интерфейса: **lo** (локальная петля) и **enp0s3** (физический сетевой адаптер).  
   Интерфейс **enp0s3** имеет статус *UP* и показывает статистику передачи (TX) и приёма (RX) пакетов. Ошибок и коллизий не зафиксировано, что свидетельствует о корректной работе сетевого адаптера.

   ![Информация о сетевых интерфейсах и статистике пакетов](Screenshot_1.png){ #fig:001 width=80% }

3. Для отображения таблицы маршрутизации использована команда **ip route show**.  
   Из вывода видно, что используется маршрут по умолчанию через шлюз **10.0.2.2**, а сеть **10.0.2.0/24** доступна через интерфейс **enp0s3**. Это стандартная конфигурация для виртуальной машины VirtualBox с NAT-сетевым адаптером.

4. Получена информация о назначенных адресах с помощью **ip addr show**.  
   Интерфейс **enp0s3** имеет IPv4-адрес **10.0.2.15/24** и IPv6-адреса.  
   Таким образом, IPv4-адрес устройства — **10.0.2.15**, а сетевой адаптер — **enp0s3**.

   ![Информация о назначенных IP-адресах](Screenshot_2.png){ #fig:002 width=80% }

5. Проверка доступности сети выполнена с помощью **ping -c 4 8.8.8.8**.  
   Ответы от удалённого узла получены без потерь пакетов, что подтверждает корректное подключение к Интернету.

   ![Проверка подключения к Интернету](Screenshot_3.png){ #fig:003 width=80% }

6. К интерфейсу **enp0s3** добавлен дополнительный адрес **10.0.0.10/24**.  
   Повторная проверка через **ip addr show** показала наличие нового IP-адреса на том же адаптере.

   ![Добавление дополнительного IP-адреса](Screenshot_4.png){ #fig:004 width=80% }

7. Для сравнения выводов утилит использована команда **ifconfig**.  
   Утилита также отображает оба интерфейса (**lo** и **enp0s3**) и подтверждает наличие добавленного адреса.  
   Разница заключается в формате и объёме информации: *ip* предоставляет больше деталей и является современным инструментом, тогда как *ifconfig* считается устаревшим.

   ![Сравнение вывода команд ip и ifconfig](Screenshot_5.png){ #fig:005 width=80% }

8. Список всех прослушиваемых системой TCP и UDP портов выведен командой **ss -tul**.  
   В выводе видны активные службы: **ssh**, **http**, **ftp**, **ipp** и др. Это позволяет определить, какие приложения принимают входящие соединения.

   ![Прослушиваемые TCP и UDP порты](Screenshot_6.png){ #fig:006 width=80% }

## Управление сетевыми подключениями с помощью nmcli

1. Получены административные права. Для просмотра текущих соединений выполнена команда **nmcli connection show**.  
   Вывод показывает активные соединения: **enp0s3** и **lo**.

2. Добавлено Ethernet-соединение с именем **dhcp** для интерфейса **enp0s3**.  

3. Создано статическое соединение **static** с параметрами IPv4-адреса **10.0.0.10/24** и шлюза **10.0.0.1**.  
   После выполнения обе записи (**dhcp** и **static**) появились в списке подключений.

   ![Добавление соединений DHCP и Static](Screenshot_7.png){ #fig:007 width=80% }

4. Переключение на статическое соединение выполнено с помощью **nmcli connection up "static"**.  
   Проверка через **ip addr** показала назначение статического адреса **10.0.0.10/24**.

   ![Активация статического соединения](Screenshot_8.png){ #fig:008 width=80% }

5. Возврат к динамическому соединению выполнен с помощью **nmcli connection up "dhcp"**.  
   После активации адрес снова получен по DHCP — **10.0.2.15**.  
   Это подтверждено выводом **ip addr** и **nmcli connection show**.

   ![Переключение обратно на DHCP-соединение](Screenshot_9.png){ #fig:009 width=80% }

## Изменение параметров соединения с помощью nmcli

1. Для начала отключено автоподключение для статического соединения **static**. Это позволяет вручную управлять активацией соединения и предотвращает его автоматическое включение при загрузке системы.

2. В статическое соединение добавлен DNS-сервер **10.0.0.10**.  
   При этом используется параметр **ipv4.dns**, поскольку соединение уже существует.  

3. Добавлен второй DNS-сервер **8.8.8.8** с помощью оператора **+**, чтобы не перезаписывать существующий список DNS-адресов.  

4. Изменён основной IP-адрес статического соединения на **10.0.0.20/24**, а затем добавлен дополнительный адрес **10.20.30.40/16**.  
   После этого статическое соединение активировано и проверено командами **nmcli connection show** и **ip addr**, подтвердившими наличие обоих IP-адресов.  

   ![Проверка настроек статического соединения и IP-адресов](Screenshot_10.png){ #fig:010 width=80% }

5. С помощью утилиты **nmtui** просмотрены текущие параметры соединений.  
   В интерфейсе для профиля **static** указаны:  
   - два IPv4-адреса (**10.0.0.20/24** и **10.20.30.40/16**);  
   - шлюз **10.0.0.1**;  
   - DNS-серверы **10.0.0.10** и **8.8.8.8**;  
   - автоматическое подключение отключено.  

   ![Параметры статического соединения в nmtui](Screenshot_11.png){ #fig:011 width=80% }

6. Для профиля **dhcp** указано автоматическое получение IP-адреса и DNS-серверов, при этом параметр автоподключения включён.  

   ![Параметры соединения DHCP в nmtui](Screenshot_12.png){ #fig:012 width=80% }

7. В графическом интерфейсе операционной системы (через настройки сети GNOME) просмотрены доступные проводные соединения.  
   Отображаются три подключения: **dhcp**, **enp0s3** и **static**.  
   Активным выбрано **static**, что подтверждает успешное применение ручных настроек.  

   ![Выбор активного соединения через графический интерфейс GNOME](Screenshot_13.png){ #fig:013 width=80% }

8. В разделе настроек IPv4 для соединения **static** указано ручное (Manual) конфигурирование.  
   Добавлены два IP-адреса (**10.0.0.20** и **10.20.30.40**) и шлюз **10.0.0.1**.  
   DNS-серверы заданы вручную — **10.0.0.10** и **8.8.8.8**.  

   ![Просмотр параметров соединения static в графическом интерфейсе](Screenshot_14.png){ #fig:014 width=80% }

9. Аналогично проверены настройки соединения **dhcp**.  
   Для него установлен автоматический метод получения IPv4-адреса (DHCP), DNS и маршрутов.  

   ![Просмотр параметров соединения dhcp в графическом интерфейсе](Screenshot_15.png){ #fig:015 width=80% }

10. После проверки соединений выполнено переключение обратно на первоначальное соединение **dhcp**.  
    Сеть успешно восстановлена, а IP-адрес снова получен автоматически.

# Контрольные вопросы

1. Команда, отображающая только статус соединения без IP-адреса:  
   - **nmcli device status** — показывает список сетевых устройств, их тип, состояние и активные соединения, но не выводит IP-параметры.

2. Служба, управляющая сетью в ОС типа RHEL:  
   - **NetworkManager** — отвечает за управление сетевыми интерфейсами, подключениями и параметрами сети.

3. Файл, содержащий имя узла (устройства) в ОС типа RHEL:  
   - **/etc/hostname** — хранит имя хоста, которое используется системой при загрузке.

4. Команда для задания имени узла (устройства):  
   - **hostnamectl set-hostname имя_узла** — изменяет текущее и постоянное имя хоста.

5. Конфигурационный файл для настройки разрешения имён для конкретных IP-адресов:  
   - **/etc/hosts** — сопоставляет IP-адреса и доменные имена, обеспечивая локальное разрешение имён без обращения к DNS.

6. Команда для отображения текущей конфигурации маршрутизации:  
   - **ip route show** — выводит таблицу маршрутов, включая маршруты по умолчанию и статические записи.

7. Проверка текущего статуса службы NetworkManager:  
   - **systemctl status NetworkManager** — отображает состояние службы, активные процессы и журнал её работы.

8. Команда для изменения текущего IP-адреса и шлюза по умолчанию для сетевого соединения:  
   - **nmcli connection modify имя_соединения ipv4.addresses адрес/маска ipv4.gateway адрес_шлюза**  
     После изменения необходимо активировать соединение командой  
     **nmcli connection up имя_соединения**.


# Заключение  

В ходе выполнения лабораторной работы были изучены основные приёмы настройки и управления сетевыми подключениями в Linux.  
Рассмотрены команды для просмотра конфигурации интерфейсов, маршрутов и статистики пакетов, а также методы проверки доступности сети.  
Практически реализованы операции по добавлению дополнительных IP-адресов, настройке соединений с помощью **nmcli** и **nmtui**, переключению между статическим и динамическим адресованием.  
